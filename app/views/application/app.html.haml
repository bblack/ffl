%html{'ng-app' => 'bb.ffl'}
    %head
        %title ffl
        %base{href: '/app/'}
        %script{type: 'text/javascript', src: 'https://ajax.googleapis.com/ajax/libs/angularjs/1.3.0/angular.min.js'}
        %script{type: 'text/javascript', src: 'https://code.angularjs.org/1.3.0/angular-route.min.js'}
        %script{type: 'text/javascript', src: 'https://code.angularjs.org/1.3.0/angular-resource.min.js'}
        %script{type: 'text/javascript', src: 'http://momentjs.com/downloads/moment.js'}
        = javascript_include_tag 'app'
        = stylesheet_link_tag 'app'
        = csrf_meta_tag
    %body
        %nav.navbar.navbar-inverse{role: 'navigation', 'ng-controller' => 'Nav'}
            .container-fluid
                .navbar-header
                    %button.navbar-toggle.collapsed{type: 'button', :'data-toggle' => 'collapse', :'data-target' => '#ffl-nav-collapse' }
                        %span.glyphicon.glyphicon-list
                    %a.navbar-brand{href: '.'}
                        FFL
                #ffl-nav-collapse.collapse.navbar-collapse
                    %ul.nav.navbar-nav
                        %li{'ng-if' => 'leagueId'}
                            %a{href: 'players?leagueId={{leagueId}}'} Players
                        %li{'ng-if' => 'leagueId'}
                            %a{href: 'leagues/{{leagueId}}/teams'} Teams
                    %p.navbar-text.pull-right{'ng-if' => 'user'}
                        {{ user.name }}
                    %form.navbar-form.navbar-right{'ng-submit' => 'login(username, password)', 'ng-if' => '!user'}
                        .form-group
                            %input.form-control.input-sm{type: 'text', placeholder: 'username', 'ng-model' => 'username'}
                        .form-group
                            %input.form-control.input-sm{type: 'password', placeholder: 'password', 'ng-model' => 'password'}
                        %input{type: 'submit', style: 'display: none;'}
        %div{'ng-view' => true}
